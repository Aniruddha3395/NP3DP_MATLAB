//simple A4988 connection
//jumper reset and sleep together
//connect  VDD to Arduino 3.3v or 5v
//connect  GND to Arduino GND (GND near VDD)
//connect  1A and 1B to stepper coil 1
//connect 2A and 2B to stepper coil 2
//connect VMOT to power source (9v battery + term)
//connect GRD to power source (9v battery - term)


int stp = 9;  //connect pin 13 to step
int dir = 8;  // connect pin 12 to dir
int i = -1;     //  gen counter
long del0=1000;
long del1=100;
int start_state = 0; 
int start_pin = 7;

byte vel[]={
32,32,32,32,32,152,236,42,129,76,73,72,70,68,67,32,67,68,68,70,71,73,127,141,145,249,73,32,32,32,32,32,32,32,32,32,32,32,32,223,220,131,80,119,71,70,68,32,68,67,67,68,71,72,73,77,79,151,212,221,32,32,32,32,32,32,32,32,32,32,32,32,73,244,123,139,125,73,71,70,32,69,67,67,68,68,71,72,73,76,130,39,242,152,32,32,32,32,32,32,32,32,32,32,32,32,152,233,39,134,77,73,72,71,69,68,67,67,68,71,32,114,77,80,134,127,251,73,32,32,32,32,32,32,32,32,32,32,32,73,251,127,134,80,77,114,32,71,68,67,67,68,69,71,72,73,77,134,39,233,152,32,32,32,32,32,32,32,32,32,32,32,32,152,242,39,130,76,73,72,71,68,68,67,67,69,32,70,71,73,125,139,123,244,73,32,32,32,32,32,32,32,32,32,32,32,32,221,212,151,79,77,73,72,71,68,67,67,68,32,68,70,71,119,80,131,220,223,32,32,32,32,32,32,32,32,32,32,32,32,73,249,145,141,127,73,71,70,68,68,67,32,67,68,70,72,73,76,129,42,236,152,32,32,32,32,32,32,32,32,32,32,32,32,223,225,102,132,76,73,72,70,68,67,67,32,68,68,70,71,73,125,136,207,186,73,32,32,32,32,32,32,32,32,32,32,32,73,186,207,136,125,73,71,70,68,68,32,67,67,68,70,72,73,76,132,102,225,223,32,32,32,32,32,32,32,32,32,32,32,32,152,236,42,129,76,73,72,70,68,67,32,67,68,68,70,71,73,127,141,145,249,73,32,32,32,32,32,32,32,32,32,32,32,32,223,220,131,80,119,71,70,68,32,68,67,67,68,71,72,73,77,79,151,212,221,32,32,32,32,32,32,32,32,32,32,32,32,73,244,123,139,125,73,71,70,32,69,67,67,68,68,71,72,73,76,130,39,242,152,32,32,32,32,32,32,32,32,32,32,32,32,152,233,39,134,77,73,72,71,69,68,67,67,68,71,32,114,77,80,134,127,251,73,32,32,32,32,32,32,32,32,32,32,32,73,251,127,134,80,77,114,32,71,68,67,67,68,69,71,72,73,77,134,39,233,152,32,32,32,32,32,32,32,32,32,32,32,32,152,242,39,130,76,73,72,71,68,68,67,67,69,32,70,71,73,125,139,123,244,73,32,32,32,32,32,32,32,32,32,32,32,32,221,212,151,79,77,73,72,71,68,67,67,68,32,68,70,71,119,80,131,220,223,32,32,32,32,32,32,32,32,32,32,32,32,73,249,145,141,127,73,71,70,68,68,67,32,67,68,70,72,73,76,129,42,236,152,32,32,32,32,32,32,32,32,32,32,32,32,223,225,102,132,76,73,72,70,68,67,67,32,68,68,70,71,73,125,136,207,186,73,32,32,32,32,32,32,32,32,32,32,32,73,186,207,136,125,73,71,70,68,68,32,67,67,68,70,72,73,76,132,102,225,223,32,32,32,32,32,32,32,32,32,32,32,32,152,236,42,129,76,73,72,70,68,67,32,67,68,68,70,71,73,127,141,145,249,73,32,32,32,32,32,32,32,32,32,32,32,32,223,220,131,80,119,71,70,68,32,68,67,67,68,71,72,73,77,79,151,212,221,32,32,32,32,32,32,32,32,32,32,32,32,73,244,123,139,125,73,71,70,32,69,67,67,68,68,71,72,73,76,130,39,242,152,32,32,32,32,32,32,32,32,32,32,32,32,152,233,39,134,77,73,72,71,69,68,67,67,68,71,32,114,77,80,134,127,251,73,32,32,32,32,32,32,32,32,32,32,32,73,251,127,134,80,77,114,32,71,68,67,67,68,69,71,72,73,77,134,39,233,152,32,32,32,32,32,32,32,32,32,32,32,32,152,242,39,130,76,73,72,71,68,68,67,67,69,32,70,71,73,125,139,123,244,73,32,32,32,32,32,32,32,32,32,32,32,32,221,212,151,79,77,73,72,71,68,67,67,68,32,68,70,71,119,80,131,220,223,32,32,32,32,32,32

//1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,300
};

void setup() 
{  
  Serial.begin(9600);              
  pinMode(stp, OUTPUT);
  pinMode(dir, OUTPUT); 
  pinMode(start_pin, INPUT);      
}


void loop() 
{
  start_state = digitalRead(start_pin);
  if (start_state==1)
  {
    i++;
    del0 = vel[i]*32;
    Serial.println(del0);

   start_state = 0;
  }
      digitalWrite(dir, HIGH);
    digitalWrite(stp, HIGH);   
    delayMicroseconds(del0);               
    digitalWrite(stp, LOW);  
   delayMicroseconds(del0);
}
  
  
  
  
  
//  
//  start_state = digitalRead(start_pin);
//  if (start_state==1)
//  {
//  long sVal = analogRead(A0);
////  Serial.println(sVal);
//  del0=1000+sVal*7;
//  del1=1000+sVal*7;
// 
//  Serial.println(del0);
//  if (a <  200)  //sweep 200 step in dir 1
//   {
//    digitalWrite(dir, HIGH);
////    a++;
//    digitalWrite(stp, HIGH);   
////    delay(del0);
//    delayMicroseconds(del0);               
//    digitalWrite(stp, LOW);  
////    delay(del0);              
//   delayMicroseconds(del0);
//   }
////  else 
////   {
//////    digitalWrite(dir, HIGH);
////    a++;
////    digitalWrite(stp, HIGH);  
////    delay(del1);               
////    digitalWrite(stp, LOW);  
////    delay(del1);
////    
////    if (a>400)    //sweep 200 in dir 2
////     {
////      a = 0;
//////      digitalWrite(dir, LOW);
////     }
//    }
//
//  }
